{
  "$schema": "https://raw.githubusercontent.com/martinring/tmlanguage/master/tmlanguage.json",
  "name": "ClaudeMD",
  "scopeName": "text.html.claudemd",
  "patterns": [
    { "include": "#frontmatter" },
    { "include": "#block" }
  ],
  "repository": {
    "frontmatter": {
      "begin": "\\A(-{3})\\s*$",
      "end": "^(-{3})\\s*$",
      "beginCaptures": { "1": { "name": "punctuation.definition.frontmatter.claudemd" } },
      "endCaptures": { "1": { "name": "punctuation.definition.frontmatter.claudemd" } },
      "name": "meta.frontmatter.claudemd",
      "patterns": [{ "include": "source.yaml" }]
    },
    "block": {
      "patterns": [
        { "include": "#heading" },
        { "include": "#horizontal-rule" },
        { "include": "#fenced-code-block" },
        { "include": "#blockquote" },
        { "include": "#list" },
        { "include": "#xml-tag" },
        { "include": "#inline" }
      ]
    },
    "heading": {
      "patterns": [
        {
          "match": "^(#{6})\\s+(.+?)\\s*$",
          "captures": {
            "1": { "name": "punctuation.definition.heading.claudemd" },
            "2": { "name": "entity.name.section.claudemd", "patterns": [{ "include": "#inline" }] }
          },
          "name": "markup.heading.6.claudemd"
        },
        {
          "match": "^(#{5})\\s+(.+?)\\s*$",
          "captures": {
            "1": { "name": "punctuation.definition.heading.claudemd" },
            "2": { "name": "entity.name.section.claudemd", "patterns": [{ "include": "#inline" }] }
          },
          "name": "markup.heading.5.claudemd"
        },
        {
          "match": "^(#{4})\\s+(.+?)\\s*$",
          "captures": {
            "1": { "name": "punctuation.definition.heading.claudemd" },
            "2": { "name": "entity.name.section.claudemd", "patterns": [{ "include": "#inline" }] }
          },
          "name": "markup.heading.4.claudemd"
        },
        {
          "match": "^(#{3})\\s+(.+?)\\s*$",
          "captures": {
            "1": { "name": "punctuation.definition.heading.claudemd" },
            "2": { "name": "entity.name.section.claudemd", "patterns": [{ "include": "#inline" }] }
          },
          "name": "markup.heading.3.claudemd"
        },
        {
          "match": "^(#{2})\\s+(.+?)\\s*$",
          "captures": {
            "1": { "name": "punctuation.definition.heading.claudemd" },
            "2": { "name": "entity.name.section.claudemd", "patterns": [{ "include": "#inline" }] }
          },
          "name": "markup.heading.2.claudemd"
        },
        {
          "match": "^(#)\\s+(.+?)\\s*$",
          "captures": {
            "1": { "name": "punctuation.definition.heading.claudemd" },
            "2": { "name": "entity.name.section.claudemd", "patterns": [{ "include": "#inline" }] }
          },
          "name": "markup.heading.1.claudemd"
        }
      ]
    },
    "horizontal-rule": {
      "match": "^\\s*([-*_]){3,}\\s*$",
      "name": "meta.separator.claudemd"
    },
    "fenced-code-block": {
      "patterns": [
        { "include": "#fenced-python" },
        { "include": "#fenced-javascript" },
        { "include": "#fenced-typescript" },
        { "include": "#fenced-cpp" },
        { "include": "#fenced-c" },
        { "include": "#fenced-json" },
        { "include": "#fenced-yaml" },
        { "include": "#fenced-xml" },
        { "include": "#fenced-html" },
        { "include": "#fenced-css" },
        { "include": "#fenced-bash" },
        { "include": "#fenced-asm" },
        { "include": "#fenced-generic" }
      ]
    },
    "fenced-python": {
      "begin": "^\\s*(`{3,}|~{3,})\\s*(python|py)\\s*$",
      "end": "^\\s*\\1\\s*$",
      "beginCaptures": {
        "1": { "name": "punctuation.definition.code.claudemd" },
        "2": { "name": "fenced_code.block.language.claudemd" }
      },
      "endCaptures": { "1": { "name": "punctuation.definition.code.claudemd" } },
      "name": "markup.fenced_code.block.claudemd",
      "contentName": "meta.embedded.block.python",
      "patterns": [{ "include": "source.python" }]
    },
    "fenced-javascript": {
      "begin": "^\\s*(`{3,}|~{3,})\\s*(javascript|js)\\s*$",
      "end": "^\\s*\\1\\s*$",
      "beginCaptures": {
        "1": { "name": "punctuation.definition.code.claudemd" },
        "2": { "name": "fenced_code.block.language.claudemd" }
      },
      "endCaptures": { "1": { "name": "punctuation.definition.code.claudemd" } },
      "name": "markup.fenced_code.block.claudemd",
      "contentName": "meta.embedded.block.javascript",
      "patterns": [{ "include": "source.js" }]
    },
    "fenced-typescript": {
      "begin": "^\\s*(`{3,}|~{3,})\\s*(typescript|ts)\\s*$",
      "end": "^\\s*\\1\\s*$",
      "beginCaptures": {
        "1": { "name": "punctuation.definition.code.claudemd" },
        "2": { "name": "fenced_code.block.language.claudemd" }
      },
      "endCaptures": { "1": { "name": "punctuation.definition.code.claudemd" } },
      "name": "markup.fenced_code.block.claudemd",
      "contentName": "meta.embedded.block.typescript",
      "patterns": [{ "include": "source.ts" }]
    },
    "fenced-cpp": {
      "begin": "^\\s*(`{3,}|~{3,})\\s*(cpp|c\\+\\+|cxx)\\s*$",
      "end": "^\\s*\\1\\s*$",
      "beginCaptures": {
        "1": { "name": "punctuation.definition.code.claudemd" },
        "2": { "name": "fenced_code.block.language.claudemd" }
      },
      "endCaptures": { "1": { "name": "punctuation.definition.code.claudemd" } },
      "name": "markup.fenced_code.block.claudemd",
      "contentName": "meta.embedded.block.cpp",
      "patterns": [{ "include": "source.cpp" }]
    },
    "fenced-c": {
      "begin": "^\\s*(`{3,}|~{3,})\\s*(c)\\s*$",
      "end": "^\\s*\\1\\s*$",
      "beginCaptures": {
        "1": { "name": "punctuation.definition.code.claudemd" },
        "2": { "name": "fenced_code.block.language.claudemd" }
      },
      "endCaptures": { "1": { "name": "punctuation.definition.code.claudemd" } },
      "name": "markup.fenced_code.block.claudemd",
      "contentName": "meta.embedded.block.c",
      "patterns": [{ "include": "source.c" }]
    },
    "fenced-json": {
      "begin": "^\\s*(`{3,}|~{3,})\\s*(json)\\s*$",
      "end": "^\\s*\\1\\s*$",
      "beginCaptures": {
        "1": { "name": "punctuation.definition.code.claudemd" },
        "2": { "name": "fenced_code.block.language.claudemd" }
      },
      "endCaptures": { "1": { "name": "punctuation.definition.code.claudemd" } },
      "name": "markup.fenced_code.block.claudemd",
      "contentName": "meta.embedded.block.json",
      "patterns": [{ "include": "source.json" }]
    },
    "fenced-yaml": {
      "begin": "^\\s*(`{3,}|~{3,})\\s*(yaml|yml)\\s*$",
      "end": "^\\s*\\1\\s*$",
      "beginCaptures": {
        "1": { "name": "punctuation.definition.code.claudemd" },
        "2": { "name": "fenced_code.block.language.claudemd" }
      },
      "endCaptures": { "1": { "name": "punctuation.definition.code.claudemd" } },
      "name": "markup.fenced_code.block.claudemd",
      "contentName": "meta.embedded.block.yaml",
      "patterns": [{ "include": "source.yaml" }]
    },
    "fenced-xml": {
      "begin": "^\\s*(`{3,}|~{3,})\\s*(xml)\\s*$",
      "end": "^\\s*\\1\\s*$",
      "beginCaptures": {
        "1": { "name": "punctuation.definition.code.claudemd" },
        "2": { "name": "fenced_code.block.language.claudemd" }
      },
      "endCaptures": { "1": { "name": "punctuation.definition.code.claudemd" } },
      "name": "markup.fenced_code.block.claudemd",
      "contentName": "meta.embedded.block.xml",
      "patterns": [{ "include": "text.xml" }]
    },
    "fenced-html": {
      "begin": "^\\s*(`{3,}|~{3,})\\s*(html)\\s*$",
      "end": "^\\s*\\1\\s*$",
      "beginCaptures": {
        "1": { "name": "punctuation.definition.code.claudemd" },
        "2": { "name": "fenced_code.block.language.claudemd" }
      },
      "endCaptures": { "1": { "name": "punctuation.definition.code.claudemd" } },
      "name": "markup.fenced_code.block.claudemd",
      "contentName": "meta.embedded.block.html",
      "patterns": [{ "include": "text.html.basic" }]
    },
    "fenced-css": {
      "begin": "^\\s*(`{3,}|~{3,})\\s*(css)\\s*$",
      "end": "^\\s*\\1\\s*$",
      "beginCaptures": {
        "1": { "name": "punctuation.definition.code.claudemd" },
        "2": { "name": "fenced_code.block.language.claudemd" }
      },
      "endCaptures": { "1": { "name": "punctuation.definition.code.claudemd" } },
      "name": "markup.fenced_code.block.claudemd",
      "contentName": "meta.embedded.block.css",
      "patterns": [{ "include": "source.css" }]
    },
    "fenced-bash": {
      "begin": "^\\s*(`{3,}|~{3,})\\s*(bash|sh|shell|zsh)\\s*$",
      "end": "^\\s*\\1\\s*$",
      "beginCaptures": {
        "1": { "name": "punctuation.definition.code.claudemd" },
        "2": { "name": "fenced_code.block.language.claudemd" }
      },
      "endCaptures": { "1": { "name": "punctuation.definition.code.claudemd" } },
      "name": "markup.fenced_code.block.claudemd",
      "contentName": "meta.embedded.block.shellscript",
      "patterns": [{ "include": "source.shell" }]
    },
    "fenced-asm": {
      "begin": "^\\s*(`{3,}|~{3,})\\s*(asm|assembly|nasm|masm)\\s*$",
      "end": "^\\s*\\1\\s*$",
      "beginCaptures": {
        "1": { "name": "punctuation.definition.code.claudemd" },
        "2": { "name": "fenced_code.block.language.claudemd" }
      },
      "endCaptures": { "1": { "name": "punctuation.definition.code.claudemd" } },
      "name": "markup.fenced_code.block.claudemd",
      "contentName": "meta.embedded.block.asm",
      "patterns": [{ "include": "source.asm" }]
    },
    "fenced-generic": {
      "begin": "^\\s*(`{3,}|~{3,})\\s*(\\S+)?\\s*$",
      "end": "^\\s*\\1\\s*$",
      "beginCaptures": {
        "1": { "name": "punctuation.definition.code.claudemd" },
        "2": { "name": "fenced_code.block.language.claudemd" }
      },
      "endCaptures": { "1": { "name": "punctuation.definition.code.claudemd" } },
      "name": "markup.fenced_code.block.claudemd",
      "contentName": "meta.embedded.block.code"
    },
    "blockquote": {
      "begin": "^\\s*(>)\\s?",
      "end": "(?=^\\s*$)|(?=^\\s*[^>\\s])",
      "beginCaptures": {
        "1": { "name": "punctuation.definition.quote.claudemd" }
      },
      "name": "markup.quote.claudemd",
      "patterns": [
        { "include": "#block" }
      ]
    },
    "list": {
      "patterns": [
        {
          "begin": "^\\s*([-*+])\\s+",
          "end": "$",
          "beginCaptures": {
            "1": { "name": "punctuation.definition.list.begin.markdown" }
          },
          "name": "markup.list.unnumbered.markdown",
          "patterns": [
            { "include": "#inline" }
          ]
        },
        {
          "begin": "^\\s*(\\d+\\.)\\s+",
          "end": "$",
          "beginCaptures": {
            "1": { "name": "punctuation.definition.list.begin.markdown" }
          },
          "name": "markup.list.numbered.markdown",
          "patterns": [
            { "include": "#inline" }
          ]
        }
      ]
    },
    "xml-tag": {
      "patterns": [
        { "include": "#xml-comment" },
        { "include": "#xml-self-closing-tag" },
        { "include": "#xml-element" }
      ]
    },
    "xml-comment": {
      "begin": "<!--",
      "end": "-->",
      "name": "comment.block.xml.claudemd",
      "captures": {
        "0": { "name": "punctuation.definition.comment.xml.claudemd" }
      }
    },
    "xml-self-closing-tag": {
      "match": "(<)([a-zA-Z_][a-zA-Z0-9_-]*)([^/]*?)(/>)",
      "captures": {
        "1": { "name": "punctuation.definition.tag.begin.xml.claudemd" },
        "2": { "name": "entity.name.tag.xml.claudemd" },
        "3": { "patterns": [{ "include": "#xml-attribute" }] },
        "4": { "name": "punctuation.definition.tag.end.xml.claudemd" }
      },
      "name": "meta.tag.self-closing.xml.claudemd"
    },
    "xml-element": {
      "begin": "(<)([a-zA-Z_][a-zA-Z0-9_-]*)([^>]*)(>)",
      "end": "(</)(\\2)(>)",
      "beginCaptures": {
        "1": { "name": "punctuation.definition.tag.begin.xml.claudemd" },
        "2": { "name": "entity.name.tag.xml.claudemd" },
        "3": { "patterns": [{ "include": "#xml-attribute" }] },
        "4": { "name": "punctuation.definition.tag.end.xml.claudemd" }
      },
      "endCaptures": {
        "1": { "name": "punctuation.definition.tag.begin.xml.claudemd" },
        "2": { "name": "entity.name.tag.xml.claudemd" },
        "3": { "name": "punctuation.definition.tag.end.xml.claudemd" }
      },
      "name": "meta.element.xml.claudemd",
      "patterns": [
        { "include": "#block" }
      ]
    },
    "xml-attribute": {
      "patterns": [
        {
          "match": "\\s+([a-zA-Z_][a-zA-Z0-9_-]*)\\s*(=)\\s*(\"[^\"]*\"|'[^']*')",
          "captures": {
            "1": { "name": "entity.other.attribute-name.xml.claudemd" },
            "2": { "name": "punctuation.separator.key-value.xml.claudemd" },
            "3": { "name": "string.quoted.xml.claudemd" }
          }
        },
        {
          "match": "\\s+([a-zA-Z_][a-zA-Z0-9_-]*)\\s*(=)\\s*([^\\s>]+)",
          "captures": {
            "1": { "name": "entity.other.attribute-name.xml.claudemd" },
            "2": { "name": "punctuation.separator.key-value.xml.claudemd" },
            "3": { "name": "string.unquoted.xml.claudemd" }
          }
        },
        {
          "match": "\\s+([a-zA-Z_][a-zA-Z0-9_-]*)",
          "captures": {
            "1": { "name": "entity.other.attribute-name.xml.claudemd" }
          }
        }
      ]
    },
    "inline": {
      "patterns": [
        { "include": "#escape" },
        { "include": "#raw" },
        { "include": "#bold" },
        { "include": "#italic" },
        { "include": "#strikethrough" },
        { "include": "#link" },
        { "include": "#image" },
        { "include": "#quoted-string" },
        { "include": "#xml-tag" }
      ]
    },
    "escape": {
      "match": "\\\\[\\\\`*_{}\\[\\]()#+\\-.!<>]",
      "name": "constant.character.escape.claudemd"
    },
    "raw": {
      "match": "(`+)((?:[^`]|(?!(?<!`)\\1(?!`))`)*+)(\\1)",
      "captures": {
        "1": { "name": "punctuation.definition.raw.markdown" },
        "2": { "name": "markup.inline.raw.string.markdown" },
        "3": { "name": "punctuation.definition.raw.markdown" }
      },
      "name": "markup.inline.raw.string.markdown"
    },
    "bold": {
      "begin": "(\\*\\*|__)(?=\\S)",
      "end": "(\\1)|(?=\\n\\n)",
      "beginCaptures": {
        "1": { "name": "punctuation.definition.bold.markdown" }
      },
      "endCaptures": {
        "1": { "name": "punctuation.definition.bold.markdown" }
      },
      "name": "markup.bold.markdown",
      "patterns": [
        { "include": "#raw" },
        { "include": "#italic" },
        { "include": "#link" },
        { "include": "#image" },
        { "include": "#escape" }
      ]
    },
    "italic": {
      "begin": "(?<![*_\\w])(\\*|_)(?=[^\\s*_])",
      "end": "(\\1)(?![*_\\w])|(?=\\n\\n)",
      "beginCaptures": {
        "1": { "name": "punctuation.definition.italic.markdown" }
      },
      "endCaptures": {
        "1": { "name": "punctuation.definition.italic.markdown" }
      },
      "name": "markup.italic.markdown",
      "patterns": [
        { "include": "#raw" },
        { "include": "#link" },
        { "include": "#image" },
        { "include": "#escape" }
      ]
    },
    "strikethrough": {
      "begin": "(~~)(?=\\S)",
      "end": "(\\1)|(?=\\n\\n)",
      "beginCaptures": {
        "1": { "name": "punctuation.definition.strikethrough.markdown" }
      },
      "endCaptures": {
        "1": { "name": "punctuation.definition.strikethrough.markdown" }
      },
      "name": "markup.strikethrough.markdown",
      "patterns": [
        { "include": "#raw" },
        { "include": "#bold" },
        { "include": "#italic" },
        { "include": "#link" },
        { "include": "#escape" }
      ]
    },
    "link": {
      "match": "(\\[)([^\\]]*)(\\])(\\()([^)]*)(\\))",
      "captures": {
        "1": { "name": "punctuation.definition.link.markdown" },
        "2": { "name": "string.other.link.title.markdown" },
        "3": { "name": "punctuation.definition.link.markdown" },
        "4": { "name": "punctuation.definition.link.markdown" },
        "5": { "name": "markup.underline.link.markdown" },
        "6": { "name": "punctuation.definition.link.markdown" }
      },
      "name": "meta.link.inline.markdown"
    },
    "image": {
      "match": "(!)\\[([^\\]]*)\\]\\(([^)]*)\\)",
      "captures": {
        "1": { "name": "punctuation.definition.image.markdown" },
        "2": { "name": "string.other.link.description.markdown" },
        "3": { "name": "markup.underline.link.image.markdown" }
      },
      "name": "meta.image.inline.markdown"
    },
    "quoted-string": {
      "begin": "\"",
      "end": "\"",
      "beginCaptures": {
        "0": { "name": "punctuation.definition.string.begin.markdown" }
      },
      "endCaptures": {
        "0": { "name": "punctuation.definition.string.end.markdown" }
      },
      "name": "string.quoted.double.markdown",
      "patterns": [
        { "include": "#raw" },
        { "include": "#bold" },
        { "include": "#italic" },
        { "include": "#escape" }
      ]
    }
  }
}
